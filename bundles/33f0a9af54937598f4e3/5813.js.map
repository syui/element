{"version":3,"file":"bundles/33f0a9af54937598f4e3/5813.js","mappings":"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","sources":["webpack://element-web/./node_modules/matrix-js-sdk/src/store/indexeddb-local-backend.ts"],"names":["DB_MIGRATIONS","db","createObjectStore","keyPath","createIndex","autoIncrement","VERSION","length","selectQuery","store","keyRange","resultMapper","query","openCursor","Promise","resolve","reject","results","onerror","Error","error","onsuccess","cursor","result","push","continue","txnAsPromise","txn","oncomplete","event","reqAsEventPromise","req","reqAsCursorPromise","then","LocalIndexedDBStoreBackend","exists","indexedDB","dbName","idbExists","constructor","_defineProperty","this","syncAccumulator","SyncAccumulator","connect","onClose","disconnected","logger","log","open","onupgradeneeded","ev","oldVersion","_isNewlyCreated","forEach","migration","index","onblocked","async","onversionchange","_this$db","close","undefined","onclose","init","isNewlyCreated","all","loadAccountData","loadSyncData","accountData","syncData","accumulate","next_batch","nextBatch","rooms","roomsData","account_data","events","getOutOfBandMembers","roomId","roomIndex","transaction","objectStore","range","IDBKeyRange","only","request","membershipEvents","oobWritten","record","value","oob_written","err","setOutOfBandMembers","tx","e","put","markerObject","room_id","state_key","clearOutOfBandMembers","roomRange","minStateKeyProm","openKeyCursor","primaryKey","maxStateKeyProm","minStateKey","maxStateKey","writeStore","membersKeyRange","bound","delete","clearDatabase","_this$db2","deleteDatabase","warn","getSavedSync","copy","data","getJSON","deepCopy","getNextBatchToken","setSyncData","syncToDatabase","userTuples","syncToDatabasePromise","pendingUserPresenceData","unshift","doSyncToDatabase","persistUserPresenceEvents","persistAccountData","persistSyncData","promiseTry","clobber","tuples","tuple","userId","getUserPresenceEvents","getClientOptions","_cursor$value","options","storeClientOptions","saveToDeviceBatches","batches","batch","add","getOldestToDeviceBatch","resultBatch","id","key","txnId","eventType","removeToDeviceBatch","destroy","_this$db3"],"sourceRoot":""}