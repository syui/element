"use strict";(self.webpackChunkelement_web=self.webpackChunkelement_web||[]).push([[1230],{"./node_modules/matrix-react-sdk/src/async-components/views/dialogs/security/CreateSecretStorageDialog.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>U});var a,r=s("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("./node_modules/react/index.js"),o=s("./node_modules/file-saver/dist/FileSaver.min.js"),i=s.n(o),c=s("./node_modules/matrix-js-sdk/src/logger.ts"),l=s("./node_modules/matrix-js-sdk/src/matrix.ts"),u=s("./node_modules/matrix-js-sdk/src/crypto/index.ts"),p=s("./node_modules/classnames/index.js"),h=s.n(p),d=s("./node_modules/matrix-react-sdk/src/MatrixClientPeg.ts"),_=s("./node_modules/matrix-react-sdk/src/languageHandler.tsx"),m=s("./node_modules/matrix-react-sdk/src/Modal.tsx"),y=s("./node_modules/matrix-react-sdk/src/utils/strings.ts"),k=s("./node_modules/matrix-react-sdk/src/components/views/auth/InteractiveAuthEntryComponents.tsx"),g=s("./node_modules/matrix-react-sdk/src/components/views/auth/PassphraseField.tsx"),P=s("./node_modules/matrix-react-sdk/src/components/views/elements/StyledRadioButton.tsx"),S=s("./node_modules/matrix-react-sdk/src/components/views/elements/AccessibleButton.tsx"),C=s("./node_modules/matrix-react-sdk/src/components/views/elements/DialogButtons.tsx"),b=s("./node_modules/matrix-react-sdk/src/components/views/elements/InlineSpinner.tsx"),v=s("./node_modules/matrix-react-sdk/src/components/views/dialogs/security/RestoreKeyBackupDialog.tsx"),f=s("./node_modules/matrix-react-sdk/src/utils/WellKnownUtils.ts"),w=s("./node_modules/matrix-react-sdk/src/modules/ModuleRunner.ts"),x=s("./node_modules/matrix-react-sdk/src/components/views/elements/Field.tsx"),E=s("./node_modules/matrix-react-sdk/src/components/views/dialogs/BaseDialog.tsx"),K=s("./node_modules/matrix-react-sdk/src/components/views/elements/Spinner.tsx"),A=s("./node_modules/matrix-react-sdk/src/components/views/dialogs/InteractiveAuthDialog.tsx");function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},B.apply(null,arguments)}var D=function(e,t){return n.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18.864 14.318",role:"presentation","aria-hidden":!0,ref:t},e),a||(a=n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"m1.25 8.037 4.886 5.031L17.614 1.25"})))},N=(0,n.forwardRef)(D);var I=s("./node_modules/matrix-react-sdk/src/components/views/auth/PassphraseConfirmField.tsx"),F=s("./node_modules/matrix-react-sdk/src/utils/device/dehydration.ts"),O=function(e){return e.Loading="loading",e.LoadError="load_error",e.ChooseKeyPassphrase="choose_key_passphrase",e.Migrate="migrate",e.Passphrase="passphrase",e.PassphraseConfirm="passphrase_confirm",e.ShowKey="show_key",e.Storing="storing",e.Stored="stored",e.ConfirmSkip="confirm_skip",e}(O||{});class U extends n.PureComponent{constructor(e){super(e),(0,r.A)(this,"recoveryKey",void 0),(0,r.A)(this,"recoveryKeyNode",(0,n.createRef)()),(0,r.A)(this,"passphraseField",(0,n.createRef)()),(0,r.A)(this,"onKeyBackupStatusChange",(()=>{this.state.phase===O.Migrate&&this.fetchBackupInfo()})),(0,r.A)(this,"onKeyPassphraseChange",(e=>{this.setState({passPhraseKeySelected:e.target.value})})),(0,r.A)(this,"onChooseKeyPassphraseFormSubmit",(async()=>{this.state.passPhraseKeySelected===f.Yc.Key?(this.recoveryKey=await d.J.safeGet().getCrypto().createRecoveryKeyFromPassphrase(),this.setState({copied:!1,downloaded:!1,setPassphrase:!1,phase:O.ShowKey})):this.setState({copied:!1,downloaded:!1,phase:O.Passphrase})})),(0,r.A)(this,"onMigrateFormSubmit",(e=>{var t;e.preventDefault(),null!==(t=this.state.backupTrustInfo)&&void 0!==t&&t.trusted?this.bootstrapSecretStorage():this.restoreBackup()})),(0,r.A)(this,"onCopyClick",(()=>{(0,y.Ud)(this.recoveryKeyNode.current)&&this.setState({copied:!0})})),(0,r.A)(this,"onDownloadClick",(()=>{if(!this.recoveryKey)return;const e=new Blob([this.recoveryKey.encodedPrivateKey],{type:"text/plain;charset=us-ascii"});i().saveAs(e,"security-key.txt"),this.setState({downloaded:!0})})),(0,r.A)(this,"doBootstrapUIAuth",(async e=>{if(this.state.canUploadKeysWithPasswordOnly&&this.state.accountPassword)await e({type:"m.login.password",identifier:{type:"m.id.user",user:d.J.safeGet().getSafeUserId()},password:this.state.accountPassword});else{const t={[k.av.PHASE_PREAUTH]:{title:(0,_._t)("auth|uia|sso_title"),body:(0,_._t)("auth|uia|sso_preauth_body"),continueText:(0,_._t)("auth|sso"),continueKind:"primary"},[k.av.PHASE_POSTAUTH]:{title:(0,_._t)("encryption|confirm_encryption_setup_title"),body:(0,_._t)("encryption|confirm_encryption_setup_body"),continueText:(0,_._t)("action|confirm"),continueKind:"primary"}},{finished:s}=m.Ay.createDialog(A.A,{title:(0,_._t)("encryption|bootstrap_title"),matrixClient:d.J.safeGet(),makeRequest:e,aestheticsForStagePhases:{[k.av.LOGIN_TYPE]:t,[k.av.UNSTABLE_LOGIN_TYPE]:t}}),[a]=await s;if(!a)throw new Error("Cross-signing key upload auth canceled")}})),(0,r.A)(this,"bootstrapSecretStorage",(async()=>{this.setState({phase:O.Storing,error:void 0});const e=d.J.safeGet().getCrypto(),{forceReset:t}=this.props;try{t?(c.v.log("Forcing secret storage reset"),await e.bootstrapSecretStorage({createSecretStorageKey:async()=>this.recoveryKey,setupNewKeyBackup:!0,setupNewSecretStorage:!0})):(await e.bootstrapCrossSigning({authUploadDeviceSigningKeys:this.doBootstrapUIAuth}),await e.bootstrapSecretStorage({createSecretStorageKey:async()=>this.recoveryKey,keyBackupInfo:this.state.backupInfo,setupNewKeyBackup:!this.state.backupInfo})),await(0,F.b)(!0),this.setState({phase:O.Stored})}catch(e){this.state.canUploadKeysWithPasswordOnly&&e instanceof l.MatrixError&&401===e.httpStatus&&e.data.flows?this.setState({accountPassword:"",accountPasswordCorrect:!1,phase:O.Migrate}):this.setState({error:!0}),c.v.error("Error bootstrapping secret storage",e)}})),(0,r.A)(this,"onCancel",(()=>{this.props.onFinished(!1)})),(0,r.A)(this,"restoreBackup",(async()=>{const{finished:e}=m.Ay.createDialog(v.A,{showSummary:!1,keyCallback:e=>{}},void 0,!1,!1);await e;const t=await this.fetchBackupInfo();null!=t&&t.trusted&&this.state.canUploadKeysWithPasswordOnly&&this.state.accountPassword&&this.bootstrapSecretStorage()})),(0,r.A)(this,"onLoadRetryClick",(()=>{this.setState({phase:O.Loading}),this.fetchBackupInfo()})),(0,r.A)(this,"onShowKeyContinueClick",(()=>{this.bootstrapSecretStorage()})),(0,r.A)(this,"onCancelClick",(()=>{this.setState({phase:O.ConfirmSkip})})),(0,r.A)(this,"onGoBackClick",(()=>{this.setState({phase:O.ChooseKeyPassphrase})})),(0,r.A)(this,"onPassPhraseNextClick",(async e=>{if(e.preventDefault(),this.passphraseField.current){if(await this.passphraseField.current.validate({allowEmpty:!1}),!this.passphraseField.current.state.valid)return this.passphraseField.current.focus(),void this.passphraseField.current.validate({allowEmpty:!1,focused:!0});this.setState({phase:O.PassphraseConfirm})}})),(0,r.A)(this,"onPassPhraseConfirmNextClick",(async e=>{e.preventDefault(),this.state.passPhrase===this.state.passPhraseConfirm&&(this.recoveryKey=await d.J.safeGet().getCrypto().createRecoveryKeyFromPassphrase(this.state.passPhrase),this.setState({copied:!1,downloaded:!1,setPassphrase:!0,phase:O.ShowKey}))})),(0,r.A)(this,"onSetAgainClick",(()=>{this.setState({passPhrase:"",passPhraseValid:!1,passPhraseConfirm:"",phase:O.Passphrase})})),(0,r.A)(this,"onPassPhraseValidate",(e=>{this.setState({passPhraseValid:!!e.valid})})),(0,r.A)(this,"onPassPhraseChange",(e=>{this.setState({passPhrase:e.target.value})})),(0,r.A)(this,"onPassPhraseConfirmChange",(e=>{this.setState({passPhraseConfirm:e.target.value})})),(0,r.A)(this,"onAccountPasswordChange",(e=>{this.setState({accountPassword:e.target.value})}));const t=d.J.safeGet();let s;s=(0,f.PR)(t).includes(f.Yc.Key)?f.Yc.Key:f.Yc.Passphrase;const a=e.accountPassword||"";let o=null;a?o=!0:this.queryKeyUploadAuth(),this.state={phase:O.Loading,passPhrase:"",passPhraseValid:!1,passPhraseConfirm:"",copied:!1,downloaded:!1,setPassphrase:!1,backupInfo:null,backupTrustInfo:void 0,accountPasswordCorrect:null,canSkip:!(0,f.R$)(t),canUploadKeysWithPasswordOnly:o,passPhraseKeySelected:s,accountPassword:a},t.on(u.cr.KeyBackupStatus,this.onKeyBackupStatusChange),this.getInitialPhase()}componentWillUnmount(){var e;null===(e=d.J.get())||void 0===e||e.removeListener(u.cr.KeyBackupStatus,this.onKeyBackupStatusChange)}getInitialPhase(){const e=w.r.instance.extensions.cryptoSetup.createSecretStorageKey();if(e)return c.v.log("CryptoSetupExtension: Created key via extension, jumping to bootstrap step"),this.recoveryKey={privateKey:e},void this.bootstrapSecretStorage();this.fetchBackupInfo()}async fetchBackupInfo(){try{var e;const t=d.J.safeGet(),s=await t.getKeyBackupVersion(),a=s?await(null===(e=t.getCrypto())||void 0===e?void 0:e.isKeyBackupTrusted(s)):void 0,{forceReset:r}=this.props,n=s&&!r?O.Migrate:O.ChooseKeyPassphrase;return this.setState({phase:n,backupInfo:s,backupTrustInfo:a}),a}catch(e){return console.error("Error fetching backup data from server",e),void this.setState({phase:O.LoadError})}}async queryKeyUploadAuth(){try{await d.J.safeGet().uploadDeviceSigningKeys(void 0,{}),c.v.log("uploadDeviceSigningKeys unexpectedly succeeded without UI auth!")}catch(e){if(!(e instanceof l.MatrixError&&e.data&&e.data.flows))return void c.v.log("uploadDeviceSigningKeys advertised no flows!");const t=e.data.flows.some((e=>1===e.stages.length&&"m.login.password"===e.stages[0]));this.setState({canUploadKeysWithPasswordOnly:t})}}renderOptionKey(){return n.createElement(P.A,{key:f.Yc.Key,value:f.Yc.Key,name:"keyPassphrase",checked:this.state.passPhraseKeySelected===f.Yc.Key,onChange:this.onKeyPassphraseChange,outlined:!0},n.createElement("div",{className:"mx_CreateSecretStorageDialog_optionTitle"},n.createElement("span",{className:"mx_CreateSecretStorageDialog_optionIcon mx_CreateSecretStorageDialog_optionIcon_secureBackup"}),(0,_._t)("settings|key_backup|setup_secure_backup|generate_security_key_title")),n.createElement("div",null,(0,_._t)("settings|key_backup|setup_secure_backup|generate_security_key_description")))}renderOptionPassphrase(){return n.createElement(P.A,{key:f.Yc.Passphrase,value:f.Yc.Passphrase,name:"keyPassphrase",checked:this.state.passPhraseKeySelected===f.Yc.Passphrase,onChange:this.onKeyPassphraseChange,outlined:!0},n.createElement("div",{className:"mx_CreateSecretStorageDialog_optionTitle"},n.createElement("span",{className:"mx_CreateSecretStorageDialog_optionIcon mx_CreateSecretStorageDialog_optionIcon_securePhrase"}),(0,_._t)("settings|key_backup|setup_secure_backup|enter_phrase_title")),n.createElement("div",null,(0,_._t)("settings|key_backup|setup_secure_backup|use_phrase_only_you_know")))}renderPhaseChooseKeyPassphrase(){const e=(0,f.PR)(d.J.safeGet()),t=e.includes(f.Yc.Key)?this.renderOptionKey():null,s=e.includes(f.Yc.Passphrase)?this.renderOptionPassphrase():null;return n.createElement("form",{onSubmit:this.onChooseKeyPassphraseFormSubmit},n.createElement("p",{className:"mx_CreateSecretStorageDialog_centeredBody"},(0,_._t)("settings|key_backup|setup_secure_backup|description")),n.createElement("div",{className:"mx_CreateSecretStorageDialog_primaryContainer",role:"radiogroup"},t,s),n.createElement(C.A,{primaryButton:(0,_._t)("action|continue"),onPrimaryButtonClick:this.onChooseKeyPassphraseFormSubmit,onCancel:this.onCancelClick,hasCancel:this.state.canSkip}))}renderPhaseMigrate(){var e;let t,s=(0,_._t)("action|next");return this.state.canUploadKeysWithPasswordOnly?t=n.createElement("div",null,n.createElement("div",null,(0,_._t)("settings|key_backup|setup_secure_backup|requires_password_confirmation")),n.createElement("div",null,n.createElement(x.A,{id:"mx_CreateSecretStorageDialog_password",type:"password",label:(0,_._t)("common|password"),value:this.state.accountPassword,onChange:this.onAccountPasswordChange,forceValidity:!1!==this.state.accountPasswordCorrect&&void 0,autoFocus:!0}))):null!==(e=this.state.backupTrustInfo)&&void 0!==e&&e.trusted?t=n.createElement("p",null,(0,_._t)("settings|key_backup|setup_secure_backup|requires_server_authentication")):(t=n.createElement("div",null,n.createElement("div",null,(0,_._t)("settings|key_backup|setup_secure_backup|requires_key_restore"))),s=(0,_._t)("action|restore")),n.createElement("form",{onSubmit:this.onMigrateFormSubmit},n.createElement("p",null,(0,_._t)("settings|key_backup|setup_secure_backup|session_upgrade_description")),n.createElement("div",null,t),n.createElement(C.A,{primaryButton:s,onPrimaryButtonClick:this.onMigrateFormSubmit,hasCancel:!1,primaryDisabled:!!this.state.canUploadKeysWithPasswordOnly&&!this.state.accountPassword},n.createElement("button",{type:"button",className:"danger",onClick:this.onCancelClick},(0,_._t)("action|skip"))))}renderPhasePassPhrase(){return n.createElement("form",{onSubmit:this.onPassPhraseNextClick},n.createElement("p",null,(0,_._t)("settings|key_backup|setup_secure_backup|enter_phrase_description")),n.createElement("div",{className:"mx_CreateSecretStorageDialog_passPhraseContainer"},n.createElement(g.A,{id:"mx_passPhraseInput",className:"mx_CreateSecretStorageDialog_passPhraseField",onChange:this.onPassPhraseChange,minScore:4,value:this.state.passPhrase,onValidate:this.onPassPhraseValidate,fieldRef:this.passphraseField,autoFocus:!0,label:(0,_.AO)("settings|key_backup|setup_secure_backup|enter_phrase_title"),labelEnterPassword:(0,_.AO)("settings|key_backup|setup_secure_backup|enter_phrase_title"),labelStrongPassword:(0,_.AO)("settings|key_backup|setup_secure_backup|phrase_strong_enough"),labelAllowedButUnsafe:(0,_.AO)("settings|key_backup|setup_secure_backup|phrase_strong_enough")})),n.createElement(C.A,{primaryButton:(0,_._t)("action|continue"),onPrimaryButtonClick:this.onPassPhraseNextClick,hasCancel:!1,disabled:!this.state.passPhraseValid},n.createElement("button",{type:"button",onClick:this.onCancelClick,className:"danger"},(0,_._t)("action|cancel"))))}renderPhasePassPhraseConfirm(){let e,t,s;return this.state.passPhraseConfirm===this.state.passPhrase?(e=(0,_._t)("settings|key_backup|setup_secure_backup|pass_phrase_match_success"),t=(0,_._t)("settings|key_backup|setup_secure_backup|use_different_passphrase")):this.state.passPhrase.startsWith(this.state.passPhraseConfirm)||(e=(0,_._t)("settings|key_backup|setup_secure_backup|pass_phrase_match_failed"),t=(0,_._t)("settings|key_backup|setup_secure_backup|set_phrase_again")),e&&(s=n.createElement("div",null,n.createElement("div",null,e),n.createElement(S.A,{kind:"link",onClick:this.onSetAgainClick},t))),n.createElement("form",{onSubmit:this.onPassPhraseConfirmNextClick},n.createElement("p",null,(0,_._t)("settings|key_backup|setup_secure_backup|enter_phrase_to_confirm")),n.createElement("div",{className:"mx_CreateSecretStorageDialog_passPhraseContainer"},n.createElement(I.A,{id:"mx_passPhraseInput",onChange:this.onPassPhraseConfirmChange,value:this.state.passPhraseConfirm,className:"mx_CreateSecretStorageDialog_passPhraseField",label:(0,_.AO)("settings|key_backup|setup_secure_backup|confirm_security_phrase"),labelRequired:(0,_.AO)("settings|key_backup|setup_secure_backup|confirm_security_phrase"),labelInvalid:(0,_.AO)("settings|key_backup|setup_secure_backup|pass_phrase_match_failed"),autoFocus:!0,password:this.state.passPhrase}),n.createElement("div",{className:"mx_CreateSecretStorageDialog_passPhraseMatch"},s)),n.createElement(C.A,{primaryButton:(0,_._t)("action|continue"),onPrimaryButtonClick:this.onPassPhraseConfirmNextClick,hasCancel:!1,disabled:this.state.passPhrase!==this.state.passPhraseConfirm},n.createElement("button",{type:"button",onClick:this.onCancelClick,className:"danger"},(0,_._t)("action|skip"))))}renderPhaseShowKey(){var e;let t;return t=this.state.phase===O.ShowKey?n.createElement(C.A,{primaryButton:(0,_._t)("action|continue"),disabled:!this.state.downloaded&&!this.state.copied&&!this.state.setPassphrase,onPrimaryButtonClick:this.onShowKeyContinueClick,hasCancel:!1}):n.createElement("div",{className:"mx_CreateSecretStorageDialog_continueSpinner"},n.createElement(b.A,null)),n.createElement("div",null,n.createElement("p",null,(0,_._t)("settings|key_backup|setup_secure_backup|security_key_safety_reminder")),n.createElement("div",{className:"mx_CreateSecretStorageDialog_primaryContainer mx_CreateSecretStorageDialog_recoveryKeyPrimarycontainer"},n.createElement("div",{className:"mx_CreateSecretStorageDialog_recoveryKeyContainer"},n.createElement("div",{className:"mx_CreateSecretStorageDialog_recoveryKey"},n.createElement("code",{ref:this.recoveryKeyNode},null===(e=this.recoveryKey)||void 0===e?void 0:e.encodedPrivateKey)),n.createElement("div",{className:"mx_CreateSecretStorageDialog_recoveryKeyButtons"},n.createElement(S.A,{kind:"primary",className:"mx_Dialog_primary",onClick:this.onDownloadClick,disabled:this.state.phase===O.Storing},(0,_._t)("action|download")),n.createElement("span",null,(0,_._t)("settings|key_backup|setup_secure_backup|download_or_copy",{downloadButton:"",copyButton:""})),n.createElement(S.A,{kind:"primary",className:"mx_Dialog_primary mx_CreateSecretStorageDialog_recoveryKeyButtons_copyBtn",onClick:this.onCopyClick,disabled:this.state.phase===O.Storing},this.state.copied?(0,_._t)("common|copied"):(0,_._t)("action|copy"))))),t)}renderBusyPhase(){return n.createElement("div",null,n.createElement(K.A,null))}renderStoredPhase(){return n.createElement(n.Fragment,null,n.createElement("p",{className:"mx_Dialog_content"},(0,_._t)("settings|key_backup|setup_secure_backup|backup_setup_success_description")),n.createElement(C.A,{primaryButton:(0,_._t)("action|done"),onPrimaryButtonClick:()=>this.props.onFinished(!0),hasCancel:!1}))}renderPhaseLoadError(){return n.createElement("div",null,n.createElement("p",null,(0,_._t)("settings|key_backup|setup_secure_backup|secret_storage_query_failure")),n.createElement("div",{className:"mx_Dialog_buttons"},n.createElement(C.A,{primaryButton:(0,_._t)("action|retry"),onPrimaryButtonClick:this.onLoadRetryClick,hasCancel:this.state.canSkip,onCancel:this.onCancel})))}renderPhaseSkipConfirm(){return n.createElement("div",null,n.createElement("p",null,(0,_._t)("settings|key_backup|setup_secure_backup|cancel_warning")),n.createElement("p",null,(0,_._t)("settings|key_backup|setup_secure_backup|settings_reminder")),n.createElement(C.A,{primaryButton:(0,_._t)("action|go_back"),onPrimaryButtonClick:this.onGoBackClick,hasCancel:!1},n.createElement("button",{type:"button",className:"danger",onClick:this.onCancel},(0,_._t)("action|cancel"))))}titleForPhase(e){switch(e){case O.ChooseKeyPassphrase:return(0,_._t)("encryption|set_up_toast_title");case O.Migrate:return(0,_._t)("settings|key_backup|setup_secure_backup|title_upgrade_encryption");case O.Passphrase:return(0,_._t)("settings|key_backup|setup_secure_backup|title_set_phrase");case O.PassphraseConfirm:return(0,_._t)("settings|key_backup|setup_secure_backup|title_confirm_phrase");case O.ConfirmSkip:return(0,_._t)("common|are_you_sure");case O.ShowKey:return(0,_._t)("settings|key_backup|setup_secure_backup|title_save_key");case O.Storing:return(0,_._t)("encryption|bootstrap_title");case O.Stored:return(0,_._t)("settings|key_backup|setup_secure_backup|backup_setup_success_title");default:return""}}get topComponent(){return this.state.phase===O.Stored?n.createElement(N,{className:"mx_Icon mx_Icon_circle-40 mx_Icon_accent mx_Icon_bg-accent-light"}):null}get classNames(){return h()("mx_CreateSecretStorageDialog",{mx_SuccessDialog:this.state.phase===O.Stored})}render(){let e,t;if(this.state.error)e=n.createElement("div",null,n.createElement("p",null,(0,_._t)("settings|key_backup|setup_secure_backup|unable_to_setup")),n.createElement("div",{className:"mx_Dialog_buttons"},n.createElement(C.A,{primaryButton:(0,_._t)("action|retry"),onPrimaryButtonClick:this.bootstrapSecretStorage,hasCancel:this.state.canSkip,onCancel:this.onCancel})));else switch(this.state.phase){case O.Loading:e=this.renderBusyPhase();break;case O.LoadError:e=this.renderPhaseLoadError();break;case O.ChooseKeyPassphrase:e=this.renderPhaseChooseKeyPassphrase();break;case O.Migrate:e=this.renderPhaseMigrate();break;case O.Passphrase:e=this.renderPhasePassPhrase();break;case O.PassphraseConfirm:e=this.renderPhasePassPhraseConfirm();break;case O.ShowKey:e=this.renderPhaseShowKey();break;case O.Storing:e=this.renderBusyPhase();break;case O.Stored:e=this.renderStoredPhase();break;case O.ConfirmSkip:e=this.renderPhaseSkipConfirm()}switch(this.state.phase){case O.Passphrase:case O.PassphraseConfirm:t=["mx_CreateSecretStorageDialog_titleWithIcon","mx_CreateSecretStorageDialog_securePhraseTitle"];break;case O.ShowKey:t=["mx_CreateSecretStorageDialog_titleWithIcon","mx_CreateSecretStorageDialog_secureBackupTitle"];break;case O.ChooseKeyPassphrase:t="mx_CreateSecretStorageDialog_centeredTitle"}return n.createElement(E.A,{className:this.classNames,onFinished:this.props.onFinished,top:this.topComponent,title:this.titleForPhase(this.state.phase),titleClass:t,hasCancel:this.props.hasCancel&&[O.Passphrase].includes(this.state.phase),fixedWidth:!1},n.createElement("div",null,e))}}(0,r.A)(U,"defaultProps",{hasCancel:!0,forceReset:!1})}}]);
//# sourceMappingURL=1230.js.map